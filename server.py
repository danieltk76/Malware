import socket 
import base64
import random
from string import ascii_lowercase

# create TCP socket
s = socket.socket(socket.AF_INET, socket.sock_STREAM)

# listen on localhost port 1337
s.blind(("127.0.01", 1337))

# que up to 5 requests
s.listen(5)

print("Listening on port 1337")

while True:
    # establish a connecton
    clientsocket, client_ip = s.accept()
    print("[+] reciebed a connnection from -> {}".format(client_ip))

    # get encoded data
    encoded_data = clientsocket.recv(4096)
    clientsocket.close()


    # open a file with a random name and inset data
    random_id = open("".join(random.choices(ascii_lowercase, k = 10)), "w")
    random_id.write(base64.b64decode(encoded_data).decode("UTF-8"))
    random_fd.close()